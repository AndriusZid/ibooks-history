!function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)r=s[u],i[r]&&p.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={0:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([90,1]),n()}({1:function(e,t,n){var o=n(127),i=n(128)();o.fn.extend({sanitizeHtml:function(e,t){return i.sanitize(e,t)},safeHtml:function(e,t){return null==e?this.html():this.html(this.sanitizeHtml(e,t))},safeAppend:function(e,t){return null==e?this.append(null):this.append(this.sanitizeHtml(e,t))},safeAttr:function(e,t){var n=this.get(0).tagName;return i.isValidAttribute(n,e,t)?this.attr(e,t):this},isSafeURLForNavigation:function(e){return i.isValidAttribute("a","href",e)}}),e.exports=o},126:function(e,t,n){e.exports=function(e){return{getImageSize:function(e,t){var n=new Image;n.onload=function(){var e=this.width,n=this.height;t(e,n)},n.onerror=function(){t()},n.src=e},processRichTextImages:function(t){t.find("img").attr({height:"",draggable:"false"}).css("max-width","100%").each(function(){var t=e(this),n=t.css("float");"left"===n?t.css({"margin-right":"10px","margin-bottom":"10px"}):"right"===n&&t.css({"margin-left":"10px","margin-bottom":"10px"})})},calculateScaleAndOffset:function(e,t,n,o,i){var a,r,s,l,c,d;return"Cover entire area, keep aspect ratio"===e?((c=t/o)<(d=n/i)?(a=d,r=d):(a=c,r=c),s=(t-o*a)/2,l=(n-i*r)/2):"Contain entire picture, keep aspect ratio"===e?((c=t/o)>(d=n/i)?(a=d,r=d):(a=c,r=c),s=(t-o*a)/2,l=(n-i*r)/2):"Cover entire area with entire picture"===e?(s=0,l=0,a=t/o,r=n/i):(a=1,r=1,s=(t-o)/2,l=(n-i)/2),{scale_x:a,scale_y:r,offset_x:s,offset_y:l}}}}(n(1))},127:function(e,t){e.exports=window.$},129:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(37),a=n(130),r=a.loadJS,s=a.loadCSS,l=!1,c=!1,d=new RegExp("https://www.bookwidgets.com/create/api/widgets/[0-9]+/preview/config.(css||js)?");function u(e){return 0===window.location.pathname.indexOf("/_ah/gcs/bookwidgets-eu--widgets/")?window.location.origin+"/_ah/gcs/bookwidgets-eu--widget-assets"+e:window.location.host.startsWith("widgets-eu.")?0===e.search(d)?e:window.location.host.replace("widgets-eu.","//widget-assets-eu.")+e:e}t.default=function(){var e=i.split(window.location.search.substring(1));e.dbg5&&n(131)({apiKey:e.dbg5,autoCaptureSessions:!1,notifyReleaseStages:["production"],releaseStage:"production"});var t=o.Deferred();if(!1===c&&!1===l){l=!0;var a=u(e.content)||"config.js",d=u(e.design)||"config.css";o.when(r(a),s(d)).fail(function(){t.reject(new Error("Unable to load config file"))}).always(function(){l=!1,c=!1;var e=window.widgetconfig;t.resolve(e),-1===navigator.userAgent.indexOf("ibookwidgets")&&(window.widgetconfig=void 0)})}return t}},130:function(e,t,n){var o=n(1);e.exports={loadJS:function(e,t,n){var i=o.Deferred(),a=document.createElement("script");if(a.setAttribute("type","text/javascript"),n){var r=!0,s=!1,l=void 0;try{for(var c,d=n[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var u=c.value;a.setAttribute(u,n[u])}}catch(e){s=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(s)throw l}}}return a.onload=function(){i.resolve()},a.onerror=function(){window.navigator&&window.navigator.userAgent&&-1===window.navigator.userAgent.indexOf("PhantomJS")&&-1===window.navigator.userAgent.indexOf("HeadlessChrome")&&console.error("Could not load: "+e),i.reject()},a.setAttribute("src",e),document.getElementsByTagName(t||"head")[0].appendChild(a),i},loadCSS:function(e,t){var n=o.Deferred(),i=document.createElement("link");return i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.onload=function(){n.resolve()},i.onerror=function(){window.navigator&&window.navigator.userAgent&&-1===window.navigator.userAgent.indexOf("PhantomJS")&&-1===window.navigator.userAgent.indexOf("HeadlessChrome")&&console.error("Could not load: "+e),n.reject()},i.setAttribute("href",e),document.getElementsByTagName(t||"head")[0].appendChild(i),n}}},133:function(e,t,n){e.exports=function(e){var t=[];window.activateDesignInfoTooltips=function(){console.log("activateDesignInfoTooltips");var n=!0;e.each(t,function(t,o){var i=e(o[0]),a="n";i.height()>700?a=i.offset()&&i.offset().left>800?"e":"w":i.offset()&&i.offset().top>700&&(a="s"),i.attr("data-tipsy",o[1]).tipsy({html:!0,title:"data-tipsy",gravity:a}),e(o[0]).click(function(e){void 0!==window.previewsidebar&&n&&(window.previewsidebar.setSelectedItem(o[1]),n=!1,setTimeout(function(){n=!0},100))})})};var n=[],o=!1;var i=!1;window.BwNotifyWidgetLoaded=function(){i||(i=!0,window.parent.postMessage("BwWidgetLoaded","*"),window.clientApp&&window.clientApp.widgetLoaded&&window.clientApp.widgetLoaded())};var a=!0;function r(){for(;n.length>0;){n.shift()()}a&&window.BwNotifyWidgetLoaded()}return window.BwUseManualWidgetLoadedNotification=function(){a=!1},function(i){if("bwshortcode"in i&&(window.bwshortcode=i.bwshortcode),"pre"in i&&(console.log("Preview"),"designinfo"in i)){console.log("With design info");for(var a=0;a<i.designinfo.length;++a)s=i.designinfo[a].s,l=i.designinfo[a].d,t.push([s,l]);"undefined"!=typeof previewsidebar&&(console.log("Previewsidebar is defined, immediately set design config"),e(function(){var e;e=function(){window.CssUpdateCounter&&(console.log("has CssUpdateCounter -> updating configCss"),window.updateConfigCSS(window.CssUpdateCounter)),console.log("Activating tooltips"),setTimeout(function(){window.activateDesignInfoTooltips()},3e3)},o?setTimeout(e,0):n.push(e)}))}var s,l;if("bra"in i&&e(function(){"iPad"===navigator.platform&&-1!==navigator.userAgent.indexOf("BookWidgets")||e(document.createElement("div")).addClass("branding").appendTo("body")}),"tri"in i&&e(function(){if("iPad"===navigator.platform||-1===navigator.userAgent.indexOf("BookWidgets")&&-1===navigator.userAgent.indexOf("ibookwidgets")){e(document.createElement("div")).addClass("dialog-sheet").attr("id","preview_alert").css({color:"red","text-shadow":"none"}).append(e(document.createElement("p")).safeHtml("This is a free preview widget, created using a trial version of BookWidgets. <b>This widget may only be used for demonstration and evaluation purposes!</b>")).append(e(document.createElement("p")).text("Please purchase a license key for the BookWidgets tool to remove this message.")).appendTo("body");var t=e(document.createElement("div")).addClass("dialog-sheet-shadow");e(document.body).append(t),window.CreateDialogSheetFor("#preview_alert"),setTimeout(function(){e("#preview_alert").data("dialogSheet").show()},2e3),setTimeout(function(){e("#preview_alert").data("dialogSheet").hide()},6e3),setTimeout(function(){e("#preview_alert").data("dialogSheet").show()},3e4),setTimeout(function(){e("#preview_alert").data("dialogSheet").hide()},34e3)}}),void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),window.getWidgetUrl=function(){return window.location.href},window.bwbackbuttonlabel=null,"performance"in window==!1&&(window.performance={}),"now"in window.performance==!1){var c=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(c=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-c}}return i.hasOwnProperty("backbutton_label")&&""!==i.backbutton_label&&(window.bwbackbuttonlabel=i.backbutton_label),"Vertical"===i.widget_orientation?e("html").addClass("vertical"):e("html").addClass("horizontal"),null!=i.widget_language&&""!==i.widget_language&&e("html").attr("lang",i.widget_language),i.hasOwnProperty("LocalizationMap")&&(window.bwlocalizationmap=i.LocalizationMap),setTimeout(r,0),null}}(n(1))},134:function(module,exports,__webpack_require__){var _require=__webpack_require__(135),valueOrCacheValue=_require.valueOrCacheValue;module.exports=function(platform,qs,cssUpdater,printer,dialog,tr,$,uiComponents,uriEncodeImage,bwTool,adaptToPageProtocol,bwTouchHelpers){function getNakedURL(e){if(-1===e.indexOf("?"))return e;var t=/^([^\?]*)\?/.exec(e);if(t&&2===t.length)return t[1];throw Error("Shoudln't happen")}function setQueryParameters(e,t){if(t==={})return e;var n=getNakedURL(e),o=[];return $.each(t,function(e,t){o.push(e+"="+t)}),n+"?"+o.join("&")}function ShowBacklinkIfRequired(){var e=qs.getUrlParams(window.location.href);if(e.hasOwnProperty("backlink")){var t=valueOrCacheValue(e.backlink);(e.hasOwnProperty("backbutton")?$(document.createElement("div")).addClass("widget-backlink widget-backlink-text").safeHtml("&#9664; ").text(valueOrCacheValue(e.backbutton)).appendTo($("body")):$(document.createElement("div")).addClass("widget-backlink widget-backlink-icon").appendTo($("body"))).click(function(){var e=platform.getPlatform();if("ibw-platform-osx-preview"===e||"ibw-platform-win32-preview"===e)console.log("Moving back by using history.back()"),window.history.back();else{var n=window.location.origin;t.startsWith(n)&&(t=t.substr(n.length)),console.log("Moving back by setting window.location to: "+t),window.location=t}})}}var block_recurse_guard=!1;function centerWidgetTitle(e){if(!block_recurse_guard){var t=$("#top-container"),n=t.height(),o=t.width(),i=$(".closebutton-container"),a=$("#top-container .bw-toolbar");i.css("min-width",""),a.css("min-width","");var r=i.width(),s=a.width();if(a.css("min-width",r),i.css("min-width",s),$(".title-container").css("max-width",o-2*Math.max(r,s)),!0!==e&&$("#top-container").height()!==n){block_recurse_guard=!0;try{window.onresize&&window.onresize()}catch(e){console.error("Error when calling onResize during centerWidgetTitle"),console.error(e)}block_recurse_guard=!1}}}function hidePopupMenu(){$("#top-container").removeClass("bw-show-popup-menu"),$("#title-toolbar").appendTo($("#top-container .bw-toolbar")),$(".bw-menu-overlay").remove()}function createPopupToolbarIfRequired(){if(!($("#menubutton").length>0)){var e=$("#top-container .bw-toolbar");if(e.children(":not(.outside-popup)").length>1){e.removeClass("bw-toolbar");var t=$(document.createElement("div")).addClass("bw-toolbar").appendTo($(".titlebar-layout"));e.find(".outside-popup").each(function(){$(this).appendTo(t)}),e.appendTo(t).addClass("bw-button-group"),$(document.createElement("div")).attr("id","menubutton").addClass("bw-toolbutton").append($(document.createElement("div")).addClass("bw-icon bw-icon-menu")).makeButton(tr("Menu")).tapOrClick(function(){$("#top-container").hasClass("bw-show-popup-menu")?hidePopupMenu():setTimeout(function(){$("#top-container").addClass("bw-show-popup-menu");var e=$(document.createElement("div")).addClass("bw-menu-overlay").appendTo("#container");setTimeout(function(){e.on("click touchend",function(){setTimeout(hidePopupMenu,500)})},350),$("#title-toolbar").appendTo(e)},100)}).appendTo(t)}}}function createTitleLayout(e,t,n){var o=$(e),i=$(document.createElement("div")).attr("id","container").prependTo(o).addClass("top-bottom-layout"),a=$(document.createElement("div")).attr("id","top-container").appendTo(i).addClass("top-container"),r=$(document.createElement("div")).appendTo(a).addClass("titlebar-layout");return $(document.createElement("div")).addClass("closebutton-container").appendTo(r),$(document.createElement("div")).addClass("title-container").append($(document.createElement("span")).attr("id","title")).appendTo(r),n?$(n).addClass("bw-toolbar").appendTo(r):$(document.createElement("div")).attr("id","title-toolbar").addClass("bw-toolbar").appendTo(r),createPopupToolbarIfRequired(),$(t).appendTo(i).addClass("bottom-container"),centerWidgetTitle(),i}function prependToTitleToolbar(e){var t=$("#title-toolbar");e.prependTo(t),createPopupToolbarIfRequired(),centerWidgetTitle()}function openDebugWindow(){var debugwindow=$(document.createElement("div")).addClass("bw-debug-window bw-row-container").appendTo("body"),debugoutput=$(document.createElement("div")).addClass("bw-debug-output bw-row-resizing").appendTo(debugwindow);function appendOutput(e){e.appendTo(debugoutput),debugoutput[0].scrollTop=debugoutput[0].scrollHeight-debugoutput[0].getBoundingClientRect().height}function argsToString(e){for(var t=[],n=0;n<e.length;++n)t.push(JSON.stringify(e[n]));return t.join(" ")}$(document.createElement("div")).addClass("bw-debug-close").text("X").tapOrClick(function(){debugwindow.remove(),localStorage.removeItem("bw-debug-enabled")}).appendTo(debugwindow),console.log=function(){appendOutput($(document.createElement("p")).safeHtml(argsToString(arguments)))},console.error=function(e,t){appendOutput($(document.createElement("p")).css("color","red").safeHtml(argsToString(arguments)))},window.onerror=function(e,t,n){return appendOutput($(document.createElement("p")).attr("style","color: red").safeHtml(e+" ("+t+":"+n+")")),!0},console.log(platform.getPlatform(),navigator.platform,navigator.userAgent);var debuginput=$(document.createElement("input")).addClass("bw-debug-input bw-row-fixed").appendTo(debugwindow),commandlist=[],index=0;function exec(str){var goodstr=str.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"');console.log(eval(goodstr)),commandlist.push(goodstr),index=commandlist.length}debuginput.keypress(function(e){13===(e.keyCode?e.keyCode:e.which)&&(exec(debuginput.val()),debuginput.val(""))}),debuginput.keydown(function(e){var t=e.keyCode?e.keyCode:e.which;38===t?index>0&&(--index,debuginput.val(commandlist[index])):40===t&&index<commandlist.length&&(++index===commandlist.length?debuginput.val(""):debuginput.val(commandlist[index]))});try{debugwindow.draggable()}catch(e){console.error("No drag support")}}function showDebugDialog(){if(!($(".bw-debug-window").length>0)){var e=$(document.createElement("div")).addClass("bw-debug-wrapper").appendTo("body"),t=$(document.createElement("div")).addClass("bw-debug-dialog").appendTo(e);$(document.createElement("p")).text("Enter your support key:").appendTo(t);var n=$(document.createElement("input")).attr("placeholder","key").appendTo(t);$(document.createElement("br")).appendTo(t),$(document.createElement("button")).attr("type","button").text("Cancel").tapOrClick(function(){e.remove()}).appendTo(t),$(document.createElement("button")).attr("type","button").text("OK").tapOrClick(function(){"bw-magic"===n.val()&&(openDebugWindow(),e.remove(),localStorage.setItem("bw-debug-enabled","true"))}).appendTo(t)}}function initializeDebugSupport(e){var t=0;e.clickOrHold(function(){t=0},function(){3==++t&&(showDebugDialog(),t=0)},2e3);try{"true"===localStorage.getItem("bw-debug-enabled")&&openDebugWindow()}catch(e){}}function makeWidget(e){e=e||{};var t=$("body");t.addClass("bw"),e.hasOwnProperty("no-user-select")&&!0===e["no-user-select"]&&t.addClass("no-user-select");var n,o=e.layout||"";if("title_layout"===o?(n=createTitleLayout("body","#bottom-container")).find(".top-container").addClass("title-only"):"title_overlay_layout"===o?((n=createTitleLayout("body","#bottom-container")).addClass("title-overlay"),n.find(".top-container").addClass("title-only")):n="title_toolbar_layout"===o?createTitleLayout("body","#bottom-container","#title-toolbar"):$("#container"),e.hasOwnProperty("title")&&""!==e.title){var i=n.find("#title");i.safeHtml(e.title),initializeDebugSupport(i)}else{var a=n.find(".top-container");a.addClass("title-empty"),initializeDebugSupport(a)}"ibw-platform-ipad-ibooks-epub"===platform.getPlatform()&&(e.hasOwnProperty("epubBlockTouchEndCheck")||(e.epubBlockTouchEndCheck=function(e){return e.srcElement instanceof SVGElement||$(e.srcElement).hasClass("epub-block")}),document.addEventListener("touchend",function(t){var n=$(window).width();(t.layerX<50||n-t.layerX<50||e.epubBlockTouchEndCheck(t))&&t.preventDefault()},!1),e.hasOwnProperty("epubBlockTouchStartCheck")&&document.addEventListener("touchstart",function(t){e.epubBlockTouchStartCheck(t)&&t.preventDefault()},!1)),ShowBacklinkIfRequired()}function getRoot(){return platform.isWebPreview()?window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/",window.location.pathname.lastIndexOf("/")-1)):""}return $(function(){var e=$("html");e.hasClass("ibw-platform-custom")||e.addClass(platform.getPlatform())}),window.custom_alert=dialog.showAlert,window.criticalAlert=dialog.showCriticalAlert,window.bw_confirmation_dialog=dialog.showConfirmationDialog,window.tr=tr,window.getUrlParams=qs.getUrlParams,window.getNakedURL=getNakedURL,window.setQueryParameters=setQueryParameters,window.createLabeledCheckbox=uiComponents.createLabeledCheckbox,window.createProgressBar=uiComponents.createProgressBar,window.createSimpleCheckbox=uiComponents.createSimpleCheckbox,window.createNumberButtons=uiComponents.createNumberButtons,window.createSimpleRadiobutton=uiComponents.createSimpleRadiobutton,window.createLabeledRadiobutton=uiComponents.createLabeledRadiobutton,window.createProgressCircle=uiComponents.createProgressCircle,window.URIEncodeImage=uriEncodeImage,window.BWAdaptToPageProtocol=adaptToPageProtocol,window.updateConfigCSS=bwTool.updateConfigCSS,{makeWidget:makeWidget,getNakedURL:getNakedURL,setQueryParameters:setQueryParameters,prependToTitleToolbar:prependToTitleToolbar,centerTitle:centerWidgetTitle,ShowBacklinkIfRequired:ShowBacklinkIfRequired,getRoot:getRoot}}(__webpack_require__(86),__webpack_require__(37),__webpack_require__(221),__webpack_require__(222),__webpack_require__(223),__webpack_require__(46),__webpack_require__(1),__webpack_require__(224),__webpack_require__(88),__webpack_require__(87),__webpack_require__(225),__webpack_require__(226))},135:function(e,t,n){"use strict";n.r(t),n.d(t,"replaceParamsBySessionLink",function(){return r}),n.d(t,"valueOrCacheValue",function(){return s});var o=n(89),i=n.n(o),a=["backbutton","backlink","q"];function r(e){if(""===e)return e;if("undefined"==typeof sessionStorage)return e;var t=e.substring(1).split("&"),n="cache_"+(new Date).getTime()+"_";return"?"+i()(t,function(e){for(var t=0;t<a.length;++t)if(e.startsWith(a[t]+"=")&&!e.startsWith(a[t]+"=cache_")){var o=n+t;return sessionStorage.setItem(o,decodeURIComponent(e.substring(a[t].length+1))),a[t]+"="+o}return e}).join("&")}function s(e){return null==e?e:e.startsWith("cache_")?sessionStorage.getItem(e):e}},221:function(e,t,n){var o=n(87);e.exports=function(e){window.addEventListener("message",function(t){var n=t.data;"set-css"===n.command&&(!function(t){for(var n=document.getElementsByTagName("link"),o=0,i=n.length;o<i;o++){var a=n[o],r=a.rel;if("string"!=typeof r||0===r.length||"stylesheet"===r){var s=a.getAttribute("href");0===s.indexOf("config")&&-1!==s.indexOf(".css")&&(a.disabled=!0)}}e("style[id='designconfig']").remove();var l=document.createElement("style");l.id="designconfig",l.type="text/css",l.appendChild(document.createTextNode(t)),document.head.appendChild(l)}(n.css),o.executeCssUpdateCallbacks())})}(n(1))},222:function(e,t){e.exports=void window.addEventListener("message",function(e){"print"===e.data.command&&window.print()})},223:function(e,t,n){e.exports=function(e,t){function n(n,o,i,a,r){r=r||r+" custom_alert",i=i||e("Ok"),o=o||"Alert",n=n||"No Message to Display";var s=t(document.createElement("div")),l={};return l[i]=function(){t(this).dialog("close"),t(this).remove(),a&&a()},s.safeHtml(n).dialog({title:o,dialogClass:"bw-dialog no-close "+r,resizable:!1,modal:!0,width:"auto",buttons:l}),s}return{showAlert:n,navigateAlert:function(e,o,i,a){var r=n(e,o,i,function(){});return r.parent().find("button").replaceWith(t(document.createElement("a")).safeHtml(i).attr({href:a,target:"_top"}).addClass("ui-button")),r},showCriticalAlert:function(e,o){var i={message:e,title:o};function a(){n(i.message,i.title)}0===t("#critical-alert-button").length&&t(document.createElement("div")).attr("id","critical-alert-button").addClass("bw-toolbutton").append(t(document.createElement("div")).addClass("bw-icon bw-icon-critical-error")).prependTo(t("#title-toolbar")).click(a),a()},showFatalAlert:function(e,n){t(document.createElement("div")).safeHtml(e).dialog({title:n,dialogClass:"bw-dialog no-close",resizable:!1,modal:!0,width:"auto"})},showConfirmationDialog:function(e,n,o,i,a,r){n||(n="Please confirm"),e||(e=""),a||(a="OK"),r||(r="Cancel"),t("#BwConfirmationDalog").remove();var s=t(document.createElement("div")).attr("id","BwConfirmationDialog"),l={};return l[a]=function(){t(this).dialog("close"),t(this).remove(),o&&o()},l[r]=function(){t(this).dialog("close"),t(this).remove(),i&&i()},s.safeHtml(e).dialog({title:n,dialogClass:"bw-dialog BwConfirmationDialog no-close",resizable:!1,modal:!0,width:500,buttons:l}),s},showInfoMessage:function(e){console.log("ShowInfoMessage");var n=t(document.createElement("div"));function o(){n.removeClass("bw-dialog-animate-in").addClass("bw-dialog-animate-out"),setTimeout(function(){n.remove()},500)}n.safeHtml(e).addClass("bw-dialog bw-info-dialog bw-dialog-animate-in").click(function(e){e.stopPropagation(),o()}).appendTo(t("body")),setTimeout(o,1e4)}}}(n(46),n(1))},224:function(e,t,n){e.exports=function(e,t){return{createLabeledCheckbox:function(t,n,o){var i=e(document.createElement("table")).addClass("bw-checkbox").appendTo(t),a=e(document.createElement("tr")).appendTo(i),r=e(document.createElement("td")).addClass("bw-checkbox-cell").appendTo(a);return e(document.createElement("div")).addClass("bw-checkbox-checkbox bw-icon bw-icon-accept").appendTo(r),e(document.createElement("td")).addClass("bw-button-label-cell").append(e(document.createElement("div")).addClass("bw-button-label").safeHtml(n)).appendTo(a),i.bind("check",function(){e(this).attr({checked:"checked","aria-checked":"true"})}),i.bind("clear",function(){e(this).attr({checked:null,"aria-checked":"false"})}),i.makeButton({role:"checkbox"}).tapOrClick(function(){var t=e(this);"disabled"!==t.attr("disabled")&&("checked"===t.attr("checked")?(t.trigger("clear"),o&&o.call(t[0],!1)):(t.trigger("check"),o&&o.call(t[0],!0)))}),i.trigger("clear"),i},createProgressBar:function(t,n){var o={};o.parent=t,o.max=n,e(document.createElement("div")).addClass("bw-progress-bar").css("left","-100%").appendTo(e(t));var i=100/n;return e(document.createElement("div")).addClass("bw-progress-bar-marker").css({left:"-100%",width:i+"%"}).appendTo(e(t)),o.setProgress=function(n,o,i){o=o||400;var a=100*-(this.max-parseFloat(n))/this.max,r=e(this.parent+"> .bw-progress-bar"),s=e(t).width(),l=-(this.max-parseFloat(n))*s/this.max;r.css("left",r.css("left")),r.animate({left:l},o,"swing",function(){r.css("left",a+"%"),i&&i()})},o.setPosition=function(n,o){o=o||400;var i=e(this.parent+"> .bw-progress-bar-marker"),a=100*parseFloat(n)/this.max,r=e(t).width()*n/this.max;i.css("left",i.css("left")),i.animate({left:r},o,"swing",function(){i.css("left",a+"%")})},o.clear=function(){e(this.parent+" .bw-progress-bar").css("left","-100%"),e(this.parent+" .bw-progress-bar-marker").css("left","-100%")},o},createSimpleCheckbox:function(t,n,o){var i=e(document.createElement("div")).addClass("bw-simple-checkbox bw-icon bw-icon-accept").appendTo(e(t)),a={role:"checkbox"};return o&&(a.labelledby=o),i.bind("check",function(){e(this).attr({checked:"checked","aria-checked":"true"})}),i.bind("clear",function(){e(this).attr({checked:null,"aria-checked":"false"})}),i.makeButton(a).tapOrClick(function(){var t=e(this);"disabled"!==t.attr("disabled")&&("checked"===t.attr("checked")?(t.trigger("clear"),n&&n.call(t[0],!1)):(t.trigger("check"),n&&n.call(t[0],!0)))}),i.trigger("clear"),i},createNumberButtons:function(n,o,i,a,r){function s(t){if(e(".buttonslot").removeClass("selected"),o<=9)e("#BS_"+t).addClass("selected");else if(t<5){e("#BS_1").removeClass("hide_number"),e("#BS_7").addClass("hide_number");for(var n=1;n<8;++n)e("#BS_"+n).find(".number-button").safeHtml(n+1);e("#BS_"+t).addClass("selected")}else if(o-t<6){e("#BS_1").addClass("hide_number"),e("#BS_7").removeClass("hide_number");for(var i=2;i<8;++i)e("#BS_"+i).find(".number-button").safeHtml(o-8+i);e("#BS_"+(9-(o-t))).addClass("selected")}else{e("#BS_1").addClass("hide_number"),e("#BS_7").addClass("hide_number");for(var s=1;s<8;++s)e("#BS_"+s).find(".number-button").safeHtml(s+t-3);e("#BS_4").addClass("selected")}0===t?e(a).addClass("hidden"):e(a).removeClass("hidden"),t===o-1?e(r).addClass("hidden"):e(r).removeClass("hidden")}for(var l=0,c=Math.min(o,9),d=e(n),u=0;u<c;++u)e(document.createElement("div")).addClass("buttonslot").attr("id","BS_"+u).append(e(document.createElement("div")).addClass("number-button bw-button").text(u+1)).appendTo(d).find(".number-button").makeButton().tapOrClick(function(){s(l=parseInt(e(this).safeHtml())-1),i(l)});function p(){--l<0&&(l=0),s(l),i(l)}function f(){++l>=o&&(l=o-1),s(l),i(l)}return o>9&&(e(document.createElement("div")).addClass("ellipsis").appendTo(e("#BS_1")),e(document.createElement("div")).addClass("ellipsis").appendTo(e("#BS_7")),e("#BS_7").addClass("hide_number"),e("#BS_7").find(".number-button").safeHtml(o-1),e("#BS_8").find(".number-button").safeHtml(o)),e("#BS_0").addClass("selected"),e(a).addClass("hidden"),e(a).makeButton(t("previous")).tapOrClick(p),e(r).makeButton(t("next")).tapOrClick(f),{updateButtons:s,next:f,prev:p}},createSimpleRadiobutton:function(t,n,o){var i=e(document.createElement("div")).addClass("bw-simple-radiobutton bw-icon").appendTo(e(t));i.bind("check",function(){e(this).attr({checked:"checked","aria-checked":"true"})}),i.bind("clear",function(){e(this).attr({checked:null,"aria-checked":"false"})});var a={role:"radio"};return o&&(a.labelledby=o),i.makeButton(a).tapOrClick(function(){var t=e(this);"disabled"!==t.attr("disabled")&&("checked"===t.attr("checked")?(t.trigger("clear"),n&&n.call(t[0],!1)):(t.trigger("check"),n&&n.call(t[0],!0)))}),i.trigger("clear"),i},createLabeledRadiobutton:function(t,n,o){var i=e(document.createElement("table")).addClass("bw-radiobutton").appendTo(t),a=e(document.createElement("tr")).appendTo(i),r=e(document.createElement("td")).addClass("bw-radiobutton-cell").appendTo(a);return e(document.createElement("div")).addClass("bw-radiobutton-radiobutton bw-icon bw-icon-largedot").appendTo(r),e(document.createElement("td")).addClass("bw-button-label-cell").append(e(document.createElement("div")).addClass("bw-button-label").safeHtml(n)).appendTo(a),i.bind("check",function(){e(this).attr({checked:"checked","aria-checked":"true"})}),i.bind("clear",function(){e(this).attr({checked:null,"aria-checked":"false"})}),i.makeButton({role:"radio"}).tapOrClick(function(){var t=e(this);"disabled"!==t.attr("disabled")&&("checked"===t.attr("checked")?(t.trigger("clear"),o&&o.call(t[0],!1)):(t.trigger("check"),o&&o.call(t[0],!0)))}),i.trigger("clear"),i},createProgressCircle:function(t,n,o){var i={},a=30,r=40,s=40;i.id=n,i.progress=Array(o);var l=e(document.createElement("div")).addClass("bw-progress-circle bw-centering-container").attr("id",n).appendTo(e(t));e(document.createElement("div")).addClass("bw-progress-circle-text bw-centered").appendTo(l);var c=[];function d(e,t){if(-1===e)return"";var n=2*Math.PI*e/o,i=2*Math.PI*(e+1)/o,a=r+Math.sin(n)*t,l=s-Math.cos(n)*t,c=r+Math.sin(i)*t,d=s-Math.cos(i)*t;return"M X1 Y1 A R R 0 0 1 X2 Y2".replace("X1",a).replace("Y1",l).replace("X2",c).replace("Y2",d).replace("D",n).replace("R",t).replace("R",t)}function u(e){return'<path d="'+d(e,a)+'"/>'}for(var p=0;p<o;++p)c.push(u(p));return e('<svg class="bw-progress-circle-drawing" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 80 80">'+c.join("")+'<path class="the marker"/></svg>').appendTo(l),i.setProgress=function(t,n){e("#"+this.id+" path:nth-child("+(t+1)+")").attr("class",n)},i.setTextAndPosition=function(t,n){var o=e("#"+this.id+" .bw-progress-circle-text");o.animate({opacity:0},200,"swing",function(){o.empty().append(t).animate({opacity:1},200)});var i=e("#"+this.id+" path.the.marker");i.animate({opacity:0},200,"swing",function(){i.attr("d",d(n,a)).animate({opacity:1},200)})},i}}}(n(1),n(46))},225:function(e,t){e.exports=function(e){var t="file:";window&&window.location&&window.location.protocol&&(t=window.location.protocol);var n="";return 0===e.indexOf("http://")?n="http://":0===e.indexOf("https://")?n="https://":0===e.indexOf("//")&&(n="//"),""!==n?"file:"===t?"//"===n?"http:"+e:e:"http:"===t?"//"===n?"http:"+e:e:"https:"===t&&"http://"===n?e.replace("http://","https://"):"//"===n?"https:"+e:e:e}},226:function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,a,r;e.exports=(i=n(86),a=n(1),-1!==(r=i.getPlatform()).indexOf("android")?a.fn.extend({clickOnDraggable:function(e){return this.each(function(){var t=!1;this.ClickOnDraggableCallback=e,a(this).on("touchstart",function(e){var n=e.originalEvent?e.originalEvent:e;1===n.changedTouches.length&&1===n.touches.length&&n.changedTouches[1]===n.touches[1]?(t=!0,setTimeout(function(){t&&(console.error("touch takes too long"),t=!1)},100)):t=!1}),a(this).on("touchend",function(e){if(t){var n=e.originalEvent?e.originalEvent:e;1===n.changedTouches.length&&0===n.touches.length?(t=!1,this.ClickOnDraggableCallback()):t=!1}})})}}):a.fn.extend({clickOnDraggable:function(e){return this.each(function(){a(this).click(e)})}}),-1!==r.indexOf("android")||-1!==r.indexOf("preview")||-1!==r.indexOf("phantomjs")||-1!==r.indexOf("headlesschrome")||-1!==r.indexOf("chrome")||"ibw-platform-osx-safari"===r||"ibw-platform-osx-ibooks"===r||"ibw-platform-osx-ibooks-epub"===r?a.fn.extend({tapOrClick:function(e){return this.each(function(){a(this).click(e);var t=this,n=a(this);n.is("button")||n.is("a")||n.on("keydown",function(n){var o=n.which;13!==o&&32!==o||e.bind(t)({preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}})})})},tapOrClickOff:function(){return this.each(function(){a(this).unbind("click");var e=a(this);e.is("button")||e.is("a")||e.off("keydown")})},triggerTapOrClick:function(e){return this.each(function(){a(this).trigger("click",e)})}}):a.fn.extend({tapOrClick:function(e){return this.each(function(){var t=this,n=a(this);n.addClass("epub-block"),n.find("*").each(function(){this instanceof SVGElement||a(this).addClass("epub-block")});var o=!1;n.hammer?"ibw-platform-ipad-bookwidgets"===r||"ibw-platform-ipad-ibooks-epub"===r||"ibw-platform-ipad-ibooks"===r?n.hammer().on("tap",function(i){!1===o&&(e.bind(t)(i),o=!0,setTimeout(function(){o=!1},500)),n.blur(),i.stopImmediatePropagation()}):n.hammer().on("tap",function(o){e.bind(t)(o),n.blur(),o.stopImmediatePropagation()}):n.click(function(o){e.bind(t)(o),n.blur()}),(n.hammer||!n.is("button")&&!n.is("a"))&&n.on("keydown",function(n){var o=n.which;13!==o&&32!==o||e.bind(t)({preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}})})})},tapOrClickOff:function(){return this.each(function(){var e=a(this);e.hammer?e.hammer().off("tap"):e.unbind("click"),(e.hammer||!e.is("button")&&!e.is("a"))&&e.off("keydown")})},triggerTapOrClick:function(e){return this.each(function(){var t=a(this);t.hammer?t.hammer().trigger("tap",e):t.trigger("click",e)})}}),a.fn.extend({clickOrHold:function(e,t,n){return n=n||3e3,this.each(function(){var o=!1,i=null;a(this).click(function(t){o||e.bind(this)(t),o=!1}),a(this).on("keydown",function(t){var n=t.which;13!==n&&32!==n||e.bind(this)({prevent:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}})}),a(this).on("mousedown touchstart",function(){var e=this;i=setTimeout(function(){i=null,o=!0,t.bind(e)()},n)}),a(this).on("mouseup touchend",function(){null!==i&&(clearTimeout(i),i=null),o&&setTimeout(function(){o=!1},400)})})}}),void a.fn.extend({makeButton:function(e){"string"==typeof(e=e||{})&&(e={label:e}),this.attr({role:e.hasOwnProperty("role")?e.role:"button"});var t=this.attr("tabindex");return"undefined"!==o(t)&&!1!==t||this.attr({tabindex:"0"}),e.hasOwnProperty("label")&&this.attr({"aria-label":e.label}),e.hasOwnProperty("labelledby")&&this.attr({"aria-labelledby":e.labelledby}),this},makeLink:function(e){return this.attr({role:"link",tabindex:"0"}),e&&this.attr({"aria-label":e}),this}}))},37:function(e,t){e.exports=function(){var e=["context_id","course_id","hide_account","lfq","lti","login_hint","no_logout","q","sso","smartschool_platform","student_class_id","submit_url","teacher_email","teacher_id"];function t(e){var t=[];if("[object Array]"===Object.prototype.toString.call(e))for(var n=0;n<e.length;++n){var o=e[n];o.length>1?t.push(encodeURIComponent(o[0])+"="+encodeURIComponent(o[1])):t.push(encodeURIComponent(o[0]))}else for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}function n(e){for(var t={},n=e.split("&"),o=0;o<n.length;o++){var i=n[o].indexOf("=");if(!(i<0)){var a=[n[o].substr(0,i),n[o].substr(i+1)],r=decodeURIComponent(a[0]);if(void 0===t[r])t[r]=decodeURIComponent(a[1]);else if("string"==typeof t[r]){var s=[t[r],decodeURIComponent(a[1])];t[r]=s}else t[r].push(decodeURIComponent(a[1]))}}return t}function o(e){for(var t=[],n=e.split("&"),o=0;o<n.length;o++){var i=n[o].indexOf("=");if(i<0)t.push([n[o]]);else{var a=[n[o].substr(0,i),n[o].substr(i+1)];t.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])])}}return t}function i(e){return!e||e.length<1||"?"!==e[0]?{}:n(e.substr(1))}function a(e){return!e||e.length<1||"?"!==e[0]?[]:o(e.substr(1))}function r(e,t){return e.split("&").filter(function(e){return decodeURIComponent(e.split("=")[0])!==t}).join("&")}function s(e){return(e=e||window.location.href).indexOf("#")>=0?"#"+(e.split("#")[1]||""):""}!function(){var n=a(window.location.search),i=[],r=s();if(r.length>=1&&"#"===r[0])for(var l=o(r.substr(1)),c=0;c<l.length;++c){var d=l[c];e.indexOf(d[0])>=0?n.push(d):i.push(d)}var u=window.location.pathname;n.length>0&&(u+="?"+t(n)),i.length>0&&(u+="#"+t(i)),"undefined"!=typeof history&&history.replaceState("",document.title,u)}();var l=s(),c=window.location.search;return{split:n,splitList:o,getUrlParams:function(e){return-1===e.indexOf("?")?{}:n(e.replace(/[^\?]*\?/,"").replace(/#.*/,""))},getQueryParams:i,getParameters:function(){var e=i(c),t=function(e){return!e||e.length<1||"#"!==e[0]?{}:n(e.substr(1))}(l);for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},removeQueryStringParameter:function(e,t){return e.length>0&&("?"===e[0]||"#"===e[0])?e[0]+r(e.substring(1),t):r(e,t)},updateWindowQueryParameter:function(e,n){for(var o=a(window.location.search),i=!1,r=0;r<o.length;++r)if(o[r][0]===e){o[r].length>1?o[r][1]=n:o[r].push(n),i=!0;break}i||o.push([e,n]),history.replaceState("",document.title,window.location.pathname+"?"+t(o)+s())},urlencode:t,getHash:s,LEGACY_HASH_PARAMETERS:e}}()},46:function(e,t,n){e.exports=(n(68),function(e){try{return window.bwlocalizationmap&&window.bwlocalizationmap[e]&&""!==window.bwlocalizationmap[e]?window.bwlocalizationmap[e]:e}catch(t){return e}})},68:function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(129).default;e.exports=function(e,t){var n={},a=t.Deferred();function r(e){return function e(n,i){if("string"==typeof n)return n.replace(/\$RESOURCEDIR/g,i);if(t.isArray(n)){for(var a=[],r=0;r<n.length;++r)a.push(e(n[r],i));return a}if("object"===o(n)){var s={};for(var l in n)n.hasOwnProperty(l)&&(s[l]=e(n[l],i));return s}return n}(e,(n="",0===window.location.pathname.indexOf("/_ah/gcs/bookwidgets-eu--widgets/")?n=window.location.origin+"/_ah/gcs/bookwidgets-eu--widget-assets":"widgets-eu.bookwidgets.com"===window.location.host&&(n="//widget-assets-eu.bookwidgets.com"),n));var n}return i().then(function(i){var s=function(e){var n=function e(n){if("string"==typeof n)return function(e){for(var t="",n=0;n<e.length;++n)2*n<e.length?t+=e.charAt(2*n):t+=e.charAt(2*(e.length-n)-1);return t}(n);if(t.isArray(n)){for(var i=[],a=0;a<n.length;++a)i.push(e(n[a]));return i}if("object"===o(n)){var r={};for(var s in n)n.hasOwnProperty(s)&&(r[s]=e(n[s]));return r}return n}(e);return n=r(n)}(i);for(var l in s)n[l]=s[l];e(n),a.resolve(n)}),{fixResourcePaths:r,getConfig:function(){return a},getConfigSync:function(){return n}}}(n(133),n(1))},86:function(e,t,n){e.exports=function(e){function t(){var e=window.navigator.userAgent,t=e.indexOf("OS ");return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&t>-1?window.Number(e.substr(t+3,3).replace("_",".")):0}function n(){return window.BW_PLATFORM_HACK?window.BW_PLATFORM_HACK:"iPad"===navigator.platform||"iPhone"===navigator.platform?void 0!==navigator.epubReadingSystem&&"iBooks"===navigator.epubReadingSystem.name?"ibw-platform-ipad-ibooks-epub":-1!==navigator.userAgent.indexOf("Safari")?"ibw-platform-ipad-safari":-1!==navigator.userAgent.indexOf("BookWidgets")?"ibw-platform-ipad-bookwidgets":"http:"!==window.location.protocol&&"https:"!==window.location.protocol?"ibw-platform-ipad-ibooks":"ibw-platform-ipad":"MacIntel"===navigator.platform?void 0!==navigator.epubReadingSystem&&"iBooks"===navigator.epubReadingSystem.name?"ibw-platform-osx-ibooks-epub":-1!==navigator.userAgent.indexOf("PhantomJS")?"ibw-platform-osx-phantomjs":-1!==navigator.userAgent.indexOf("HeadlessChrome")?"ibw-platform-osx-headlesschrome":-1!==navigator.userAgent.indexOf("ibookwidgets")?"ibw-platform-osx-preview":-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-osx-chrome":-1!==navigator.userAgent.indexOf("Safari")?"ibw-platform-osx-safari":-1!==navigator.userAgent.indexOf("Firefox")?"ibw-platform-osx-firefox":"http:"!==window.location.protocol&&"https:"!==window.location.protocol?"ibw-platform-osx-ibooks":"ibw-platform-osx":"Win32"===navigator.platform?-1!==navigator.userAgent.indexOf("BookWidgets")?"ibw-platform-win32-preview":"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&-1!==navigator.userAgent.indexOf("Trident")||"Netscape"===navigator.appName&&-1!==navigator.userAgent.indexOf("Edge")?"ibw-platform-win32-ie":-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-win32-chrome":"Microsoft Internet Explorer"===navigator.appName?"ibw-platform-win32-ie":-1!==navigator.userAgent.indexOf("Firefox")?"ibw-platform-win32-firefox":"ibw-platform-win32":"iPad Simulator"===navigator.platform||"iPhone Simulator"===navigator.platform?"ibw-platform-ipad-bookwidgets":-1!==navigator.userAgent.indexOf("Android")?-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-android-chrome":"ibw-platform-android":-1!==navigator.userAgent.indexOf("CrOS")?-1!==navigator.userAgent.indexOf("Chrome")?"ibw-platform-chromebook-chrome":"ibw-platform-chromebook":"ibw-platform-unknown"}return{getPlatform:n,supportsAppFeature:function(e){var t=/BookWidgets\/([0-9]+)\.([0-9]+)\.([0-9]+)/g.exec(navigator.userAgent),n=t&&4===t.length?1e4*parseInt(t[1])+100*parseInt(t[2])+parseInt(t[3]):0;return console.log(e+" "+n),"audiorecording"===e&&n>=20800},isToolPreview:function(){return-1!==this.getPlatform().indexOf("preview")},isWebPreview:function(){return"1"===e.getUrlParams(window.location.href).preview},isPreview:function(){return this.isToolPreview()||this.isWebPreview()},isTopLevelPlay:function(){return"1"===e.getUrlParams(window.location.href).toplevel},usesCredentialProxy:function(){return-1!==window.location.search.substring(1).indexOf("bwds-secure-proxy")},isAndroidIosDevice:function(){var e=n();return 0===e.indexOf("ibw-platform-ipad")||0===e.indexOf("ibw-platform-android")},isTouchDevice:function(){return this.isAndroidIosDevice()||(t=" -webkit- -moz- -o- -ms- ".split(" "),"ontouchstart"in window||(e=["(",t.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(e).matches));var e,t},isIOS:function(){return"iPad"===navigator.platform||"iPhone"===navigator.platform},isInternetExplorer:function(){return-1!==window.navigator.userAgent.indexOf("MSIE ")||/rv:11.0/i.test(window.navigator.userAgent)},getIOSIBooksRestartInfo:function(){return t()>=7?'To close iBooks:<ol style="text-align: left;"><li>Double-click the Home button.</li><li>Swipe left or right until you have located iBooks.</li><li>Swipe the app\'s preview up to close it.</li></ol>':t()>=5?"To close iBooks:<ol style=\"text-align: left;\"><li>Double-click the Home button.</li><li>Touch-and-hold the iBooks icon to put it into 'jiggly mode'.</li><li>Tap the red minus-sign icon that appears at the top left corner of iBooks.</li><li>Click the Home button to exit 'jiggly mode'.</li></ol>":""},inIframe:function(){try{return window.self!==window.top}catch(e){return!0}}}}(n(37))},87:function(e,t){e.exports=function(){var e=[];function t(){for(var t=0;t<e.length;++t)e[t]()}return{executeCssUpdateCallbacks:t,CssUpdateCallbacks:e,updateConfigCSS:function(e){for(var n=document.getElementsByTagName("link"),o=0,i=n.length;o<i;o++){var a=n[o],r=a.rel;if("string"!=typeof r||0===r.length||"stylesheet"===r){var s=a.getAttribute("href");0===s.indexOf("config")&&-1!==s.indexOf(".css")&&(a.setAttribute("href","config"+e+".css"),setTimeout(t,100))}}},addAllDesignInfo:function(){void 0!==window.addAllDesignInfo&&window.addAllDesignInfo()},addCSSUpdateCallback:function(t){e.push(t)}}}()},88:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"string"==typeof(t=e)||"object"===n(t)&&t.constructor===String?0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//")?e.replace(/\(/g,"_").replace(/\)/g,"_").replace(/'/g,"%27"):encodeURIComponent(e).replace(/%2F/g,"/").replace(/'/g,"%27"):"";var t}},90:function(e,t,n){n(91);var o,i,a,r,s=n(126),l=s.getImageSize,c=s.calculateScaleAndOffset;e.exports=(o=n(68),i=n(134),a=n(1),r=n(88),void a(function(){o.getConfig().then(function(e){i.makeWidget({layout:"title_overlay_layout",title:e.title,"no-user-select":!0});var t="cover";"Contain entire picture, keep aspect ratio"===e["resize-policy"]?t="contain":"Cover entire area with entire picture"===e["resize-policy"]&&(t="100% 100%"),a("#image1").css({background:"black url("+r(e.before)+") no-repeat center center","background-size":t}),a("#image2").css({background:"black url("+r(e.after)+") no-repeat center center","background-size":t});var n=0,o=0,s=1e3,d=1e3,u=e.start_position&&""!=e.start_position?parseFloat(e.start_position)/100:.5;function p(e){a("#imagemask").css("height",e+20+d)}function f(e){a("#imagemask").css("width",e+20+s)}function g(e){a("#imagemask").css("opacity",e)}var h=1024,m=768,w={scale_x:1,scale_y:1,offset_x:0,offset_y:0};function b(e,t,n,o){return(e-2*o)*t+o}function v(e,t,n,o){return(t-o)/(e-2*o)}function k(e){return v(o,e+20+s,w.scale_x,w.offset_x)}function y(e,t,n,o){var i,a,r=e/2.5,s=[[-e,-r],[-e,-e],[-e-e,0],[-e,e],[-e,r],[e,r],[e,e],[e+e,0],[e,-e],[e,-r]],l="";o?(i=1,a=0):(i=0,a=1);for(var c=0;c<s.length;++c){var d=s[c];l+=d[i]+t+","+(n+d[a])+" "}return l}function x(){if("vertical"===e.handle_orientation){if((c=[]).push('<line x1="0" y1="'+(20+d)+'" x2="3072" y2="'+(20+d)+'"/>'),""===e.handle_type||"default"===e.handle_type){var t=y(15,55,20+d,!0);c.push('<polygon points="'+t+'"/>')}else"none"==e.handle_type&&c.push('<rect class="transparent" x="0" y="0" width="3072" height="2048"/>');var i=a('<svg id="draghandle" class="horizontal" xmlns="http://www.w3.org/2000/svg" version="1.1">'+c.join("")+"</svg>").appendTo(a("#bottom-container"));"image"==e.handle_type&&""!=e.handle_image&&((l=new Image).onload=function(){var t=this.width,n=this.height,o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS(null,"height",n),o.setAttributeNS(null,"width",t),o.setAttributeNS("http://www.w3.org/1999/xlink","href",r(e.handle_image)),o.setAttributeNS(null,"x",55-t/2),o.setAttributeNS(null,"y",1020-n/2),o.setAttributeNS(null,"visibility","visible"),i.append(o)},l.src=e.handle_image),i.draggable({axis:"y",drag:function(e,t){var o;p(t.offset.top),n&&(o=t.offset.top,u=v(n,o+20+d,w.scale_y,w.offset_y))}}),i.css({left:"0px",top:"500px",height:"2048px",width:"3072px"}),_()}else if("horizontal"==e.handle_orientation)(c=[]).push('<line x1="'+(20+s)+'" y1="0" x2="'+(20+s)+'" y2="2048"/>'),""==e.handle_type||"default"==e.handle_type?(t=y(15,s+20,1975,!1),c.push('<polygon points="'+t+'"/>')):"none"==e.handle_type&&c.push('<rect class="transparent" x="0" y="0" width="3072" height="2048"/>'),i=a('<svg id="draghandle" class="vertical" xmlns="http://www.w3.org/2000/svg" version="1.1">'+c.join("")+"</svg>").appendTo(a("#bottom-container")),"image"==e.handle_type&&""!=e.handle_image&&((l=new Image).onload=function(){var t=this.width,n=this.height,o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS(null,"height",n),o.setAttributeNS(null,"width",t),o.setAttributeNS("http://www.w3.org/1999/xlink","href",r(e.handle_image)),o.setAttributeNS(null,"x",1020-t/2),o.setAttributeNS(null,"y",975-n/2),o.setAttributeNS(null,"visibility","visible"),i.append(o)},l.src=e.handle_image),i.draggable({axis:"x",drag:function(e,t){f(t.offset.left),o&&(u=k(t.offset.left))}}),i.css({bottom:"0px",left:"500px",height:"2048px",width:"3072px"}),_();else{var l,c=[];""==e.handle_type||"default"==e.handle_type?(t=y(15,s+20,975,!1),c.push('<polygon points="'+t+'"/>')):"none"==e.handle_type&&c.push('<rect class="transparent" x="0" y="0" width="3072" height="2048"/>'),i=a('<svg id="draghandle" class="vertical" xmlns="http://www.w3.org/2000/svg" version="1.1">'+c.join("")+"</svg>").appendTo(a("#bottom-container")),"image"==e.handle_type&&""!=e.handle_image&&((l=new Image).onload=function(){var t=this.width,n=this.height,o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS(null,"height",n),o.setAttributeNS(null,"width",t),o.setAttributeNS("http://www.w3.org/1999/xlink","href",r(e.handle_image)),o.setAttributeNS(null,"x",1020-t/2),o.setAttributeNS(null,"y",975-n/2),o.setAttributeNS(null,"visibility","visible"),i.append(o)},l.src=e.handle_image),i.draggable({axis:"x",drag:function(e,t){o&&(u=k(t.offset.left)),g(u)}}),i.css({bottom:"0px",left:"500px",height:"1024px",width:"3072px"}),_()}}function C(){var t=a("body").width(),n=a("body").height();w=c(e["resize-policy"],t,n,h,m)}function _(){var t,i,r;C(),a("#image2").css("width",a("#image1").width()),a("#image2").css("height",a("#image1").height()),t=a("#draghandle"),i=t.parent(),o=i.width(),n=i.height(),t.draggable({containment:[-20-s,-20-d,o-20-s,n-20-d]}),"vertical"===e.handle_orientation?(p(r=b(n,u,w.scale_y,w.offset_y)-20-d),a("#draghandle").css("top",r)):"horizontal"===e.handle_orientation?function(){var e=b(o,u,w.scale_x,w.offset_x)-20-s;f(e),a("#draghandle").css("left",e)}():function(){var e=b(o,u,w.scale_x,w.offset_x)-20-s;g(u),a("#draghandle").css("left",e)}()}return l(e.before,function(e,t){h=e,m=t,C(),x()}),"undefined"!=typeof addAllDesignInfo&&addAllDesignInfo(),window.onresize=_,null})}))},91:function(e,t,n){"use strict";n.r(t);n(92),n(117),n(119),n(123),n(125)}});